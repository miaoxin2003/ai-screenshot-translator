========== AI截图翻译工具打包说明 ==========

【解决设置不保存问题】

出现的问题：
- 打包后的exe程序无法保存设置，每次重新打开都重置为默认设置
- 设置API密钥后关闭程序再打开，密钥丢失

解决方法：

1. 采用新的设置管理方式
   已重写了设置处理逻辑，使用settings_helper.py单独处理设置文件的保存和加载。
   新的设置文件将保存在以下位置（按优先级）：
   - 程序运行目录（最优先）
   - 可执行文件所在目录
   - 脚本所在目录

2. 打包时的注意事项
   - 确保使用更新后的setup.py进行打包
   - 打包命令：python setup.py
   - 打包完成后，dist目录中会自动创建settings.json文件

3. 分发给用户时的说明
   - 只需要分发exe文件即可，不需要附带settings.json
   - 首次运行程序时，会自动在exe所在目录创建settings.json文件
   - 用户的设置将保存在此文件中，不会丢失

4. 处理权限问题（如果用户的设置仍然无法保存）
   某些情况下（如程序安装在系统目录）可能没有写入权限，此时：
   - 建议用户将程序移至普通用户目录下运行
   - 或者右键"以管理员身份运行"程序
   - 或者手动在运行目录创建一个空的settings.json文件并设置为可写入

【如何检查设置是否正确保存】

1. 打开程序并设置API密钥和其他选项
2. 关闭程序
3. 在exe文件所在目录查找settings.json文件
4. 用文本编辑器打开，确认设置已经保存
5. 重新打开程序，确认之前的设置已被加载

【技术说明】

修改了以下文件：
- main.py: 改用settings_helper模块处理设置
- settings_helper.py: 新增的设置文件处理模块
- setup.py: 修改了打包参数，确保设置文件能正确处理

如果出现问题，请联系开发者获取支持。 